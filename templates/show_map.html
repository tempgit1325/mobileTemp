<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <title>show_map</title>
</head>
<body>
<a href="{{ url_for('show_views.logout') }}">logout</a><br>
<p>map</p>
<div id="map"
    data-pickup-lat="{{ shipment.pickup_lat or 0 }}" 
    data-pickup-lng="{{ shipment.pickup_lng or 0 }}"
    data-delivery-lat="{{ shipment.delivery_lat or 0 }}" 
    data-delivery-lng="{{ shipment.delivery_lng or 0 }}" 
    style="height: 500px;"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

<script>
// Pobranie danych z div
var mapDiv = document.getElementById('map');

var pickup = [
    parseFloat(mapDiv.dataset.pickupLat),
    parseFloat(mapDiv.dataset.pickupLng)
];

var delivery = [
    parseFloat(mapDiv.dataset.deliveryLat),
    parseFloat(mapDiv.dataset.deliveryLng)
];

// Inicjalizacja mapy
var map = L.map('map').setView(pickup, 13);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

// Markery
L.marker(pickup).addTo(map).bindPopup('Pickup location');
L.marker(delivery).addTo(map).bindPopup('Delivery location');

// Linia
L.polyline([pickup, delivery], {color: 'blue'}).addTo(map);

// Dopasowanie widoku do obu punkt√≥w
map.fitBounds([pickup, delivery]);

</script>



</body>
</html>
